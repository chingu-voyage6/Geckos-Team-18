<ng-container *ngIf="(user | async)?.uid; else login">
    <button mat-button [matMenuTriggerFor]="menu">
        <img [src]="getGravatarImage(user.uid)">
    </button>
    <mat-menu #menu="matMenu" fxLayout="column" fxLayoutAlign="center center" fxFlex>
        <div *ngIf="(user | async )?.uid;else spinner"> 
            <h3>Hello, <span>{{ ( user | async )?.displayName }}</span>!</h3>
            <button class="collections" mat-menu-item routerLink="/collections">My collections</button>
            <button mat-raised-button color="warn" (click)="signOut()">Logout</button>
        </div>
        <ng-template #spinner>
            <mat-spinner diameter="40"></mat-spinner>
        </ng-template>
    </mat-menu>
</ng-container>
<ng-template #login>
    <a mat-raised-button color="accent" routerLink="/login">Login</a>
</ng-template>